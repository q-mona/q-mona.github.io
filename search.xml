<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>微信小程序实现翻译功能</title>
    <url>/WeChat-translation/</url>
    <content><![CDATA[<h1 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>在写这个微信小程序之前正好学习了一下vue.js<br>结果微信小程序这玩意儿的代码格式和vue竟然差不多<br>刚好可以一边写微信小程序一边复习一下vue的用法 一举两得啊=。=<br><strong>本项目只是我对微信小程序的初步认识哈 如果程序有缺憾(肯定有=。=)请见谅</strong></p>
<h2 id="项目资源地址"><a href="#项目资源地址" class="headerlink" title="项目资源地址"></a>项目资源地址</h2><p><a href="https://github.com/q-mona/wechat-translation/tree/master" target="_blank" rel="noopener">https://github.com/q-mona/wechat-translation/tree/master</a></p>
<h1 id="使用须知"><a href="#使用须知" class="headerlink" title="使用须知"></a>使用须知</h1><h2 id="注册百度翻译账号"><a href="#注册百度翻译账号" class="headerlink" title="注册百度翻译账号"></a>注册百度翻译账号</h2><p>这个小程序需要配合百度翻译的API一同使用<br>如果没有注册百度翻译账号的请去<a href="https://api.fanyi.baidu.com" target="_blank" rel="noopener">https://api.fanyi.baidu.com</a>注册<br>注册完成后在控制台找到自己的appid和key 如图<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://cdn.jsdelivr.net/gh/q-mona/wechat-translation@latest/translation_app/assets/key.png" alt="pic"></p>
<h2 id="填写appid和key"><a href="#填写appid和key" class="headerlink" title="填写appid和key"></a>填写appid和key</h2><p>完成后找到info.js填写信息即可直接运行 如图<br><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://cdn.jsdelivr.net/gh/q-mona/wechat-translation@latest/translation_app/assets/info.png" alt="pic"></p>
<h1 id="代码预览"><a href="#代码预览" class="headerlink" title="代码预览"></a>代码预览</h1><h2 id="index界面"><a href="#index界面" class="headerlink" title="index界面"></a>index界面</h2><p>index.wxml</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;!--背景颜色--&gt;</span><br><span class="line">&lt;view class=<span class="string">"background"</span>&gt;&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--翻译内容区域--&gt;</span><br><span class="line">&lt;view style=<span class="string">"width:100%"</span>&gt;</span><br><span class="line">  &lt;scroll-view scroll-y=<span class="string">"true"</span> scroll-into-view=<span class="string">"&#123;&#123;into&#125;&#125;"</span>&gt;</span><br><span class="line">    &lt;view wx:<span class="keyword">for</span>=<span class="string">"&#123;&#123;text&#125;&#125;"</span> wx:<span class="keyword">if</span>=<span class="string">"&#123;&#123;index!=0&#125;&#125;"</span> wx:key=<span class="string">"to"</span>&gt;</span><br><span class="line">      &lt;view class=<span class="string">"text text_from"</span>&gt;</span><br><span class="line">        &lt;text&gt;原文&lt;/text&gt;</span><br><span class="line">        &lt;image class=<span class="string">"audio_img"</span> src=<span class="string">"../../assets/icon/audio.png"</span> mode=<span class="string">"aspectFill"</span> data-index=<span class="string">"&#123;&#123;index&#125;&#125;"</span> data-type=<span class="string">"from"</span> bindtap=<span class="string">"audio_click"</span>&gt;&lt;/image&gt;</span><br><span class="line">        &lt;text selectable=<span class="string">"true"</span>&gt;\n&#123;&#123;item._from&#125;&#125;&lt;/text&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">      &lt;view class=<span class="string">"text text_to"</span>&gt;</span><br><span class="line">        &lt;text&gt;翻译&lt;/text&gt;</span><br><span class="line">        &lt;image class=<span class="string">"audio_img"</span> src=<span class="string">"../../assets/icon/audio.png"</span> mode=<span class="string">"aspectFill"</span> data-index=<span class="string">"&#123;&#123;index&#125;&#125;"</span> data-type=<span class="string">"to"</span> bindtap=<span class="string">"audio_click"</span>&gt;&lt;/image&gt;</span><br><span class="line">        &lt;text id=<span class="string">"num&#123;&#123;index&#125;&#125;"</span> selectable=<span class="string">"true"</span>&gt;\n&#123;&#123;item.to&#125;&#125;&lt;/text&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/view&gt;</span><br><span class="line">  &lt;/scroll-view&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--底部输入区域--&gt;</span><br><span class="line">&lt;view&gt;</span><br><span class="line">  &lt;image class=<span class="string">"icon language"</span> src=<span class="string">"../../assets/icon/language.png"</span> bindtap=<span class="string">"change_language"</span> mode=<span class="string">"aspectFill"</span>&gt;&lt;/image&gt;</span><br><span class="line">  &lt;input placeholder=<span class="string">"当前 &#123;&#123;_from&#125;&#125; 转 &#123;&#123;to&#125;&#125;"</span> bindinput=<span class="string">"inputText"</span> bindconfirm=<span class="string">"finish"</span> value=<span class="string">'&#123;&#123;content&#125;&#125;'</span>&gt;&lt;/input&gt;</span><br><span class="line">  &lt;image class=<span class="string">"icon send"</span> src=<span class="string">"../../assets/icon/send.png"</span> bindtap=<span class="string">"finish"</span> mode=<span class="string">"aspectFill"</span>&gt;&lt;/image&gt;</span><br><span class="line">&lt;/view&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--隐藏的音频--&gt;</span><br><span class="line">&lt;audio id=<span class="string">"myAudio"</span> src=<span class="string">"&#123;&#123;audio_url&#125;&#125;"</span>&gt;&lt;/audio&gt;</span><br></pre></td></tr></table></figure>
<p>index.wxss</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.background &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">  position: fixed;</span><br><span class="line">  background: whitesmoke;</span><br><span class="line">  z-index: -9999;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">scroll-view &#123;</span><br><span class="line">  height: 1100rpx;</span><br><span class="line">  margin-bottom: 100rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.text &#123;</span><br><span class="line">  position: relative;</span><br><span class="line">  padding: 10rpx;</span><br><span class="line">  color: black;</span><br><span class="line">  background-color: white;</span><br><span class="line">  border-radius: 25rpx;</span><br><span class="line">  margin-top: 5rpx;</span><br><span class="line">  width: 50%;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.text_from &#123;</span><br><span class="line">  <span class="built_in">float</span>: right;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.text_to &#123;</span><br><span class="line">  <span class="built_in">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.audio_img &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">  top: 10rpx;</span><br><span class="line">  margin-left: 20rpx;</span><br><span class="line">  width: 40rpx;</span><br><span class="line">  height: 40rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">input &#123;</span><br><span class="line">  text-align: center;</span><br><span class="line">  width: 70%;</span><br><span class="line">  height: 100rpx;</span><br><span class="line">  color: black;</span><br><span class="line">  background-color: rgb(255, 255, 255);</span><br><span class="line">  position: fixed;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  left: 15%;</span><br><span class="line">  border-radius: 50rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.icon &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  bottom: 0;</span><br><span class="line">  width: 15%;</span><br><span class="line">  height: 100rpx;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.language &#123;</span><br><span class="line">  left: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.send &#123;</span><br><span class="line">  right: 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>index.js</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">var tool = require(<span class="string">'../../utils/tool.js'</span>)</span><br><span class="line"></span><br><span class="line">Page(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    into: <span class="string">''</span>, //指定滚动条的位置</span><br><span class="line">    content: <span class="string">''</span>, //输入框的内容</span><br><span class="line">    _from: <span class="string">'自动检测'</span>, //默认输入语言</span><br><span class="line">    to: <span class="string">'中文'</span>, //默认翻译语言</span><br><span class="line">    audio_url: <span class="string">''</span>, //音频地址</span><br><span class="line">    text: [&#123;</span><br><span class="line">      _from: <span class="string">''</span>, //输入原文</span><br><span class="line">      to: <span class="string">''</span>, //翻译文字</span><br><span class="line">      audio_from: <span class="string">''</span>, //原文语种</span><br><span class="line">      audio_to: <span class="string">''</span> //翻译语种</span><br><span class="line">    &#125;]</span><br><span class="line">  &#125;,</span><br><span class="line">  //输入完毕</span><br><span class="line">  finish: <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    //输入为空 直接返回</span><br><span class="line">    <span class="keyword">if</span> (this.data.content == <span class="string">''</span>)</span><br><span class="line">      <span class="built_in">return</span>;</span><br><span class="line"></span><br><span class="line">    //清空输入框的值  </span><br><span class="line">    var str = this.data.content;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      content: <span class="string">''</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    //获得语言代号</span><br><span class="line">    var f = tool.get_language(this.data._from);</span><br><span class="line">    var t = tool.get_language(this.data.to);</span><br><span class="line">    var that = this;</span><br><span class="line"></span><br><span class="line">    //发送请求</span><br><span class="line">    tool.bdRequest(str, f, t, that);</span><br><span class="line">  &#125;,</span><br><span class="line">  //获取输入框的值</span><br><span class="line">  inputText: <span class="keyword">function</span>(e) &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      content: e.detail.value</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  //点击语言切换按钮</span><br><span class="line">  change_language: <span class="function"><span class="title">function</span></span>() &#123;</span><br><span class="line">    wx.navigateTo(&#123;</span><br><span class="line">      url: <span class="string">'../language/language'</span>,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  //点击音频按钮</span><br><span class="line">  audio_click: <span class="keyword">function</span>(e) &#123;</span><br><span class="line">    var index = e.currentTarget.dataset.index; //获得文本的索引</span><br><span class="line">    <span class="keyword">if</span> (e.currentTarget.dataset.type == <span class="string">'from'</span>) &#123;</span><br><span class="line">      var tex = this.data.text[index]._from; //获得原文本</span><br><span class="line">      var lan = this.data.text[index].audio_from; //获得原语种</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      var tex = this.data.text[index].to; //获得翻译文本</span><br><span class="line">      var lan = this.data.text[index].audio_to; //获得翻译文本</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      audio_url: <span class="string">'https://tts.baidu.com/text2audio?tex='</span> + tex + <span class="string">'&amp;cuid=baike&amp;lan='</span> + lan + <span class="string">'&amp;ctp=0&amp;pdt=301&amp;vol=9&amp;rate=32&amp;per=0'</span></span><br><span class="line">    &#125;)</span><br><span class="line">    // console.log(this.data.audio_url);</span><br><span class="line">    this.audioCtx = wx.createAudioContext(<span class="string">'myAudio'</span>);</span><br><span class="line">    this.audioCtx.setSrc(this.data.audio_url);</span><br><span class="line">    this.audioCtx.play();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="language界面（切换语言）"><a href="#language界面（切换语言）" class="headerlink" title="language界面（切换语言）"></a>language界面（切换语言）</h2><p>language.wxml</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;view style=<span class="string">"width:100%;display:flex; flex-direction: row;"</span>&gt;</span><br><span class="line">  &lt;view style=<span class="string">"width:50%"</span>&gt;</span><br><span class="line">    &lt;view class=<span class="string">"tips"</span>&gt;当前：&#123;&#123;_from&#125;&#125;&lt;/view&gt;</span><br><span class="line">    &lt;scroll-view scroll-y=<span class="string">"true"</span>&gt;</span><br><span class="line">      &lt;view wx:<span class="keyword">for</span>=<span class="string">"&#123;&#123;lang1&#125;&#125;"</span> wx:key=<span class="string">"item"</span> style=<span class="string">"margin-top:20px;color:&#123;&#123;index == num1?'red':'black'&#125;&#125;"</span>&gt;</span><br><span class="line">        &lt;text bindtap=<span class="string">"click1"</span> id=<span class="string">"&#123;&#123;index&#125;&#125;"</span> selectable=<span class="string">"true"</span>&gt;&#123;&#123;item&#125;&#125;&lt;/text&gt;</span><br><span class="line">        &lt;text&gt;\n&lt;/text&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/scroll-view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line"></span><br><span class="line">  &lt;view style=<span class="string">"width:50%;float:right;"</span>&gt;</span><br><span class="line">    &lt;view class=<span class="string">"tips"</span>&gt;目标：&#123;&#123;to&#125;&#125;&lt;/view&gt;</span><br><span class="line">    &lt;scroll-view scroll-y=<span class="string">"true"</span>&gt;</span><br><span class="line">      &lt;view wx:<span class="keyword">for</span>=<span class="string">"&#123;&#123;lang1&#125;&#125;"</span> wx:key=<span class="string">"item"</span> style=<span class="string">"margin-top:20px;color:&#123;&#123;index == num2?'red':'black'&#125;&#125;"</span>&gt;</span><br><span class="line">        &lt;text bindtap=<span class="string">"click2"</span> wx:<span class="keyword">if</span>=<span class="string">"&#123;&#123;index!=0&#125;&#125;"</span> id=<span class="string">"&#123;&#123;index&#125;&#125;"</span> selectable=<span class="string">"true"</span> bin&gt;&#123;&#123;item&#125;&#125;&lt;/text&gt;</span><br><span class="line">        &lt;text&gt;\n&lt;/text&gt;</span><br><span class="line">      &lt;/view&gt;</span><br><span class="line">    &lt;/scroll-view&gt;</span><br><span class="line">  &lt;/view&gt;</span><br><span class="line">&lt;/view&gt;</span><br></pre></td></tr></table></figure>
<p>language.wxss</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">.tips &#123;</span><br><span class="line">  color: black;</span><br><span class="line">  font-size: 20px;</span><br><span class="line">  text-align: center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">scroll-view &#123;</span><br><span class="line">  height: 1000rpx;</span><br><span class="line">  color: black;</span><br><span class="line">  text-align: center;</span><br><span class="line">  margin-top: 10px;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>language.js</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Page(&#123;</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 页面的初始数据</span><br><span class="line">   */</span><br><span class="line">  data: &#123;</span><br><span class="line">    lang1: [</span><br><span class="line">      <span class="string">'自动检测'</span>,</span><br><span class="line">      <span class="string">'中文'</span>,</span><br><span class="line">      <span class="string">'英语'</span>,</span><br><span class="line">      <span class="string">'粤语'</span>,</span><br><span class="line">      <span class="string">'文言文'</span>,</span><br><span class="line">      <span class="string">'日语'</span>,</span><br><span class="line">      <span class="string">'韩语'</span>,</span><br><span class="line">      <span class="string">'法语'</span>,</span><br><span class="line">      <span class="string">'西班牙语'</span>,</span><br><span class="line">      <span class="string">'阿拉语'</span>,</span><br><span class="line">      <span class="string">'俄语'</span>,</span><br><span class="line">      <span class="string">'葡萄牙语'</span>,</span><br><span class="line">      <span class="string">'德语'</span>,</span><br><span class="line">      <span class="string">'意大利语'</span>,</span><br><span class="line">      <span class="string">'希腊语'</span>,</span><br><span class="line">      <span class="string">'荷兰语'</span>,</span><br><span class="line">      <span class="string">'波兰语'</span>,</span><br><span class="line">      <span class="string">'保加利亚语'</span>,</span><br><span class="line">      <span class="string">'爱沙尼亚语'</span>,</span><br><span class="line">      <span class="string">'丹麦语'</span>,</span><br><span class="line">      <span class="string">'芬兰语'</span>,</span><br><span class="line">      <span class="string">'捷克语'</span>,</span><br><span class="line">      <span class="string">'罗马尼亚语'</span>,</span><br><span class="line">      <span class="string">'斯洛文尼亚语'</span>,</span><br><span class="line">      <span class="string">'瑞典语'</span>,</span><br><span class="line">      <span class="string">'匈牙利语'</span>,</span><br><span class="line">      <span class="string">'繁体中文'</span>,</span><br><span class="line">      <span class="string">'越南语'</span>,</span><br><span class="line">    ],</span><br><span class="line">    _from: <span class="string">''</span>,</span><br><span class="line">    to: <span class="string">''</span>,</span><br><span class="line">    num1: 0,</span><br><span class="line">    num2: 1,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  /**</span><br><span class="line">   * 生命周期函数--监听页面加载</span><br><span class="line">   */</span><br><span class="line">  onShow: <span class="keyword">function</span> (options) &#123;</span><br><span class="line">    var pages = getCurrentPages();</span><br><span class="line">    <span class="built_in">let</span> prevPage = pages[pages.length - 2]; //prevPage 是获取上一个页面的js里面的pages的所有信息。</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (var i = 0; i &lt; this.data.lang1.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (prevPage.data._from == this.data.lang1[i])</span><br><span class="line">        this.setData(&#123;</span><br><span class="line">          num1: i</span><br><span class="line">        &#125;)</span><br><span class="line">      <span class="keyword">if</span> (prevPage.data.to == this.data.lang1[i])</span><br><span class="line">        this.setData(&#123;</span><br><span class="line">          num2: i</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      _from: prevPage.data._from,</span><br><span class="line">      to: prevPage.data.to,</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  click1: <span class="keyword">function</span> (e) &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      _from: this.data.lang1[e.target.id],</span><br><span class="line">      num1: e.target.id</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    var pages = getCurrentPages();</span><br><span class="line">    <span class="built_in">let</span> prevPage = pages[pages.length - 2]; //prevPage 是获取上一个页面的js里面的pages的所有信息。</span><br><span class="line">    prevPage.setData(&#123;</span><br><span class="line">      _from: this.data._from,</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  click2: <span class="keyword">function</span> (e) &#123;</span><br><span class="line">    this.setData(&#123;</span><br><span class="line">      to: this.data.lang1[e.target.id],</span><br><span class="line">      num2: e.target.id</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    var pages = getCurrentPages();</span><br><span class="line">    <span class="built_in">let</span> prevPage = pages[pages.length - 2]; //prevPage 是获取上一个页面的js里面的pages的所有信息。</span><br><span class="line">    prevPage.setData(&#123;</span><br><span class="line">      to: this.data.to</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h1 id="项目小结"><a href="#项目小结" class="headerlink" title="项目小结"></a>项目小结</h1><h2 id="遇到的问题"><a href="#遇到的问题" class="headerlink" title="遇到的问题"></a>遇到的问题</h2><p>1.百度翻译的接口需要md5加密<br>一开始用md5加密还好好的结果遇到中文就不行了 后来换了一个支持中文的md5.js(本项目中的)才解决<br>2.一样的style在行内层叠样式和外部层叠样式显示的效果不同=。=<br>不知道是我错了还是有bug 反正我就放行内了<br>3.本来想加一个背景图片的结果微信直接报错 微信小程序的总文件不能超过2M=。=<br>结果我的png图片要3M多<br>不愧是<strong>小程序</strong>啊 如果一定要放背景图的话可以转成jpg格式的 但算了算了 也懒得放了<br>4.对于不同的手机界面不一定兼容 本项目是在iPhone6.7.8/plus上测试的<br>虽然微信小程序提供了rpx 但是对于屏幕太长的手机在输入次数很多的时候滚动布局还是有点难看<br>不过懒得改了=。= 没错就是这么任性</p>
<h2 id="思考人生"><a href="#思考人生" class="headerlink" title="思考人生"></a>思考人生</h2><p>不得不说虽然css+html看着简单但真要写个完整的前端还是要费点脑子的<br>不知道啥时候我的布局可以指哪放哪哦=。=<br>不过微信小程序这种类似vue的框架对于实现前端的布局和事件响应还是十分方便的 时代变了啊~<br>目前又开始啃react框架了 和vue相比学习起来还是复杂一点 不过不学感觉更不上时代欸<br>芜湖 前路漫漫哦=。=</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>微信小程序</tag>
        <tag>百度翻译接口</tag>
      </tags>
  </entry>
  <entry>
    <title>在hexo中使用自定义的live2d模型</title>
    <url>/hexo-live2d/</url>
    <content><![CDATA[<h2 id="在普通网页使用live2d"><a href="#在普通网页使用live2d" class="headerlink" title="在普通网页使用live2d"></a>在普通网页使用live2d</h2><p>见<a href="https://www.mona.cool/live2d/">https://www.mona.cool/live2d/</a></p>
<h2 id="在hexo使用默认的live2d"><a href="#在hexo使用默认的live2d" class="headerlink" title="在hexo使用默认的live2d"></a>在hexo使用默认的live2d</h2><p>几步就可以~</p>
<h3 id="first"><a href="#first" class="headerlink" title="first"></a>first</h3><p>git bash(我使用的)中输入以下指令 安装live2d插件</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure>
<h3 id="second"><a href="#second" class="headerlink" title="second"></a>second</h3><p>在根目录_config.yml添加(没有代码就自己写 有就更改 以下配置可以改着玩)</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  scriptFrom: <span class="built_in">local</span></span><br><span class="line">  pluginRootPath: live2dw/</span><br><span class="line">  pluginJsPath: lib/</span><br><span class="line">  pluginModelPath: assets/</span><br><span class="line">  tagMode: <span class="literal">false</span></span><br><span class="line">  debug: <span class="literal">false</span></span><br><span class="line">  model:</span><br><span class="line">    use: 你的live2d名称(例：live2d-widget-model-z16)</span><br><span class="line">  display:</span><br><span class="line">    position: right</span><br><span class="line">    width: 150</span><br><span class="line">    height: 300</span><br><span class="line">  mobile:</span><br><span class="line">    show: <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<h3 id="third"><a href="#third" class="headerlink" title="third"></a>third</h3><p>git bash中输入以下指令 安装live2d</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install live2d-widget-model-shizuku(此处为上文mode：use的名称)</span><br></pre></td></tr></table></figure>
<p>详细文档和可用live2d模型见<a href="https://github.com/EYHN/hexo-helper-live2d" target="_blank" rel="noopener">https://github.com/EYHN/hexo-helper-live2d</a></p>
<h2 id="在hexo中使用自己的live2d"><a href="#在hexo中使用自己的live2d" class="headerlink" title="在hexo中使用自己的live2d"></a>在hexo中使用自己的live2d</h2><p>官方的live2d虽然安装简单但是太普通了(还不够可爱啊！！)</p>
<h3 id="1-移动目录"><a href="#1-移动目录" class="headerlink" title="1.移动目录"></a>1.移动目录</h3><p>将你下好的live2d放置themes/next(我的主题)/source中<br>我的live2d保存在github上<br>资源见<a href="https://www.mona.cool/live2d/">https://www.mona.cool/live2d/</a></p>
<h3 id="2-修改layout"><a href="#2-修改layout" class="headerlink" title="2.修改layout"></a>2.修改layout</h3><p>移至themes/next/layout/_layout.swig(或.ejs还是啥的都一样)<br>在body中添加</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;!--css的路径--&gt;</span><br><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"https://cdn.jsdelivr.net/gh/q-mona/live2d@latest/live2d/live2d/css/live2d.css"</span> /&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--我的live2d布局--&gt;</span><br><span class="line">&lt;div id=<span class="string">"landlord"</span>&gt;</span><br><span class="line">  &lt;div id=<span class="string">"test"</span>&gt;</span><br><span class="line">    &lt;div class=<span class="string">"message"</span> style=<span class="string">"opacity:0"</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;canvas id=<span class="string">"live2d"</span> width=<span class="string">"280"</span> height=<span class="string">"250"</span> class=<span class="string">"live2d"</span>&gt;&lt;/canvas&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=<span class="string">"hide-button"</span>&gt;隐藏&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--jQuery路径--&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"https://cdn.jsdelivr.net/gh/q-mona/mona@latest/js/jquery.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">  &lt;!--用于message.js中initTips()的url--&gt;</span><br><span class="line">  var message_Path = <span class="string">'/live2d/'</span></span><br><span class="line">  &lt;!--你的主页路径 删了也没啥--&gt;</span><br><span class="line">  var home_Path = <span class="string">'https://q-mona.github.io/'</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--引入js--&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"https://cdn.jsdelivr.net/gh/q-mona/live2d@latest/live2d/live2d/js/live2d.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"https://cdn.jsdelivr.net/gh/q-mona/live2d@1.2/live2d/live2d/js/message.js"</span>&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--引入live2d--&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">  loadlive2d(<span class="string">"live2d"</span>, <span class="string">"https://cdn.jsdelivr.net/gh/q-mona/live2d@1.2/live2d/live2d/model/tia/model.json"</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>此处所有路径改为你自己的就行<br>注:此处路径和source中的文件同级<br>例:loadlive2d(“live2d”, “live2d/model/tia/model.json”);<br>最后hexo clean &amp;&amp; hexo g &amp;&amp; hexo s就完成了</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>web</tag>
        <tag>hexo</tag>
        <tag>live2d</tag>
      </tags>
  </entry>
  <entry>
    <title>给网站添加live2d</title>
    <url>/live2d/</url>
    <content><![CDATA[<h2 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h2><p>由于时间久远我已经忘了原作者的地址 此资源是我自己改后的版本</p>
<h3 id="demo效果图"><a href="#demo效果图" class="headerlink" title="demo效果图"></a>demo效果图</h3><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://cdn.jsdelivr.net/gh/q-mona/live2d@latest/live2d/xxb.PNG" alt="pic"></p>
<h3 id="资源链接"><a href="#资源链接" class="headerlink" title="资源链接"></a>资源链接</h3><p><a href="https://github.com/q-mona/live2d" target="_blank" rel="noopener">https://github.com/q-mona/live2d</a></p>
<h2 id="代码解析"><a href="#代码解析" class="headerlink" title="代码解析"></a>代码解析</h2><h3 id="html代码"><a href="#html代码" class="headerlink" title="html代码"></a>html代码</h3><p>引入css</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;link rel=<span class="string">"stylesheet"</span> href=<span class="string">"/live2d/css/live2d.css"</span> /&gt;</span><br></pre></td></tr></table></figure>

<p>live2d的整个组件的布局就这些</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;div id=<span class="string">"landlord"</span>&gt;</span><br><span class="line">  &lt;div id=<span class="string">"test"</span>&gt;</span><br><span class="line">    &lt;div class=<span class="string">"message"</span> style=<span class="string">"opacity:0"</span>&gt;&lt;/div&gt;</span><br><span class="line">    &lt;canvas id=<span class="string">"live2d"</span> width=<span class="string">"280"</span> height=<span class="string">"250"</span> class=<span class="string">"live2d"</span>&gt;&lt;/canvas&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=<span class="string">"hide-button"</span>&gt;隐藏&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>引入jQuery和js（该live2d有用到jQuery 不引入部分功能会失效）<br>文件的所有路径和home_Path可以改成自己的<br>loadlive2d(“live2d”,”此处为你live2d模型的路径”) json格式</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"https://cdn.jsdelivr.net/gh/q-mona/mona@latest/js/jquery.min.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">  var message_Path = <span class="string">'/live2d/'</span></span><br><span class="line">  var home_Path = <span class="string">'https://q-mona.github.io/'</span></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"/live2d/js/live2d.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span> src=<span class="string">"/live2d/js/message.js"</span>&gt;&lt;/script&gt;</span><br><span class="line">&lt;script <span class="built_in">type</span>=<span class="string">"text/javascript"</span>&gt;</span><br><span class="line">  loadlive2d(<span class="string">"live2d"</span>, <span class="string">"/live2d/model/tia/xxb_model.json"</span>);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>


<h3 id="message-js"><a href="#message-js" class="headerlink" title="message.js"></a>message.js</h3><p>此处为打开控制台的彩蛋 原作者的代码在我谷歌浏览器上不起作用注释掉了<br>但我的代码在其他浏览器上不一定有作用（IE试过不行）=。= GG<br>想完善的可以自行baidu~</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">/**</span><br><span class="line"> * Object.defineProperty(对象,对象属性,对象属性的特性)</span><br><span class="line"> * get:<span class="function"><span class="title">function</span></span>()&#123;&#125;获取当前值时触发的方法</span><br><span class="line"> * <span class="built_in">set</span>:<span class="keyword">function</span>(value)&#123;x = value&#125;//当设置值的时候触发的函数,设置的新值通过参数value拿到</span><br><span class="line"> */</span><br><span class="line">var element = new Image();</span><br><span class="line">Object.defineProperty(element, <span class="string">'id'</span>, &#123;</span><br><span class="line">    get: <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">        /* TODO */</span><br><span class="line">        showMessage(<span class="string">'哈哈，你打开了控制台，是想要看看我的秘密吗？'</span>, 5000);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line">//%c表示css样式</span><br><span class="line">console.log(<span class="string">'%cHello'</span>, element);</span><br></pre></td></tr></table></figure>

<p>文章复制时的彩蛋</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$(document).on(<span class="string">'copy'</span>, <span class="function"><span class="title">function</span></span> () &#123;</span><br><span class="line">    showMessage(<span class="string">'你都复制了些什么呀，转载要记得加上出处哦~~'</span>, 5000);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p><a href="https://v1.hitokoto.cn/" target="_blank" rel="noopener">https://v1.hitokoto.cn/</a> 为原作者获得互动话题的url 挺好用</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">showHitokoto</span></span>() &#123;</span><br><span class="line">    $.getJSON(<span class="string">'https://v1.hitokoto.cn/'</span>, <span class="keyword">function</span> (result) &#123;</span><br><span class="line">        showMessage(result.hitokoto, 5000);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该函数每次返回一个json对象(hitokoto为互动的语句) 类似<br>{<br>  “id”: 4094,<br>  “hitokoto”: “亲爱的，你的心在哪里？”,<br>  “type”: “c”,<br>  “from”: “少女前线”,<br>  “from_who”: null,<br>  “creator”: “xiaoh”,<br>  “creator_uid”: 2097,<br>  “reviewer”: 0,<br>  “uuid”: “70fa988e-1958-4a6e-bbd2-febd23f7f1ca”,<br>  “created_at”: “1538827044”<br>}</p>
<p>initLive2d() 初始化live2d 此处被我修改过（增加了显示的功能 以前只能隐藏不能显示=。=）<br>你也可以在live2d.css自行修改隐藏的样式和方法</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="function"><span class="title">initLive2d</span></span>() &#123;</span><br><span class="line">    $(<span class="string">'.hide-button'</span>).fadeOut(0).on(<span class="string">'click'</span>, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> ($(<span class="string">'.hide-button'</span>).html() == <span class="string">'显示'</span>) &#123;</span><br><span class="line">            $(<span class="string">'#test'</span>).css(<span class="string">'display'</span>, <span class="string">''</span>);</span><br><span class="line">            $(<span class="string">'.hide-button'</span>).html(<span class="string">'隐藏'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            $(<span class="string">'#test'</span>).css(<span class="string">'display'</span>, <span class="string">'none'</span>);</span><br><span class="line">            $(<span class="string">'.hide-button'</span>).html(<span class="string">'显示'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    $(<span class="string">'#landlord'</span>).hover(() =&gt; &#123;</span><br><span class="line">        $(<span class="string">'.hide-button'</span>).fadeIn(600)</span><br><span class="line">    &#125;, () =&gt; &#123;</span><br><span class="line">        <span class="keyword">if</span> ($(<span class="string">'.hide-button'</span>).html() != <span class="string">'显示'</span>)</span><br><span class="line">            $(<span class="string">'.hide-button'</span>).fadeOut(600)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="修改message-json"><a href="#修改message-json" class="headerlink" title="修改message.json"></a>修改message.json</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">"mouseover"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"selector"</span>: <span class="string">"#landlord #live2d"</span>,</span><br><span class="line">            <span class="string">"text"</span>: [</span><br><span class="line">                <span class="string">"四处走走，你会热爱这个世界"</span>,</span><br><span class="line">                <span class="string">"口味最好杂一点，耳音要好一些，能多听懂几种方言。口味单调一点，耳音差一点，也还不要紧，最要紧的是对生活的兴趣要广一点。"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"selector"</span>: <span class="string">".reward-container"</span>,</span><br><span class="line">            <span class="string">"text"</span>: [</span><br><span class="line">                <span class="string">"是不小心 点到的吗"</span>,</span><br><span class="line">                <span class="string">"如果可以$$的话 嘻嘻"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"click"</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="string">"selector"</span>: <span class="string">"#landlord #live2d"</span>,</span><br><span class="line">            <span class="string">"text"</span>: [</span><br><span class="line">                <span class="string">"我的原作者似乎来自德国哦"</span>,</span><br><span class="line">                <span class="string">"你在我身上找什么呢"</span>,</span><br><span class="line">                <span class="string">"呜呜呜（＞人＜；）"</span>,</span><br><span class="line">                <span class="string">"再摸的话我可要报警了！⌇●﹏●⌇"</span>,</span><br><span class="line">                <span class="string">"M！ O！ N！ A！"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>mouseover为鼠标移入事件 click为鼠标点击事件<br>想要增加更多互动功能 在message.json中新建对象后去message.js的initTips()中增加success回调后的方法<br>selector为选择器 可以填你想要互动组件的id/class/。。。<br>text为互动内容可以随意增删改</p>
<h2 id="引入别的模型"><a href="#引入别的模型" class="headerlink" title="引入别的模型"></a>引入别的模型</h2><h3 id="首先引入资源"><a href="#首先引入资源" class="headerlink" title="首先引入资源"></a>首先引入资源</h3><p>角色动画放入motoins里<br>png图片放入textures里<br>model.moc放入tia下<br>(文件后缀名不同可能加密过 不一定可以使用)<br>路径可以不一样 引用的路径正确就行</p>
<h3 id="修改model-json"><a href="#修改model-json" class="headerlink" title="修改model.json"></a>修改model.json</h3><p>把model和textures路径修改成你的资源</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="string">"model"</span>:<span class="string">"model.moc"</span>,</span><br><span class="line"><span class="string">"textures"</span>:[</span><br><span class="line">    <span class="string">"textures/xxb.png"</span></span><br><span class="line">],</span><br></pre></td></tr></table></figure>


<p>idle空闲时播放的动画<br>sleepy睡觉=。=<br>flick_head点击头部后触发的动画<br>tap_body点击身体后触发的动画<br>把你的动画资源放到合适的地方<br>（例idle有多种动画会定时随机播放一种，大概=。=）</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="string">"motions"</span>:&#123;</span><br><span class="line">    <span class="string">"idle"</span>:[    </span><br><span class="line">        &#123;<span class="string">"file"</span>: <span class="string">"motions/Idle.mtn"</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"sleepy"</span>:[</span><br><span class="line">        &#123; <span class="string">"file"</span>: <span class="string">"motions/Nemui.mtn"</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"flick_head"</span>:[</span><br><span class="line">        &#123;<span class="string">"file"</span>: <span class="string">"motions/Anone_Synced.mtn"</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">"tap_body"</span>:[</span><br><span class="line">        &#123;<span class="string">"file"</span>: <span class="string">"motions/Dance.mtn"</span>&#125;</span><br><span class="line">    ],</span><br><span class="line">    <span class="string">""</span>:[]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="最后修改html"><a href="#最后修改html" class="headerlink" title="最后修改html"></a>最后修改html</h3><p>loadlive2d(“live2d”, “你的model.json路径”);<br>就ok了=。=</p>
]]></content>
      <categories>
        <category>技术</category>
      </categories>
      <tags>
        <tag>web</tag>
        <tag>live2d</tag>
      </tags>
  </entry>
</search>
